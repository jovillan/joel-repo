<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
	
	<import resource="classpath:spring-security-ldap.xml" />

	<bean id="securityServiceManager" class="com.capgemini.iit.app.security.service.manager.SecurityServiceManager" autowire="byName" >
		<property name="subjectService" ref="subjectService" />
	</bean>
	
	<bean id="subjectService" class="com.capgemini.iit.app.security.subject.SubjectDelegate" autowire="byName" >
		<property name="subject" ref="subject" />
	</bean>
	
<!-- 	<bean id="subject" class="com.capgemini.iit.app.security.subject.SpringSubject" autowire="byName" scope="prototype" > -->
	<bean id="subject" class="com.capgemini.iit.app.security.subject.SpringSubject" autowire="byName" >
		<property name="authenticationManager" ref="authenticationManager" />
		<property name="requestCache" ref="httpSessionRequestCache" />
	</bean>
	
	<bean id="httpSessionRequestCache" class="org.springframework.security.web.savedrequest.HttpSessionRequestCache" />
	
	<!-- logout -->
<!-- 	<bean id="logoutFilter" class="org.springframework.security.web.authentication.logout.LogoutFilter"> -->
<!--         <constructor-arg name="logoutSuccessHandler" ref="noRedirectLogoutSuccessHandler" /> -->
<!-- 	    <constructor-arg name="handlers"> -->
<!-- 	            <ref bean="securityContextLogoutHandler"/> -->
<!-- 	    </constructor-arg> -->
<!-- 	</bean> -->
	
<!-- 	<bean id="noRedirectLogoutSuccessHandler" class="com.capgemini.iit.app.security.handler.NoRedirectLogoutSuccessHandler"/> -->
	
<!-- 	<bean id="securityContextLogoutHandler" class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler"> -->
<!-- 	    <property name="invalidateHttpSession" value="true"/> -->
<!-- 	</bean> -->

</beans>
